<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<style type="text/css">
	header,section,footer,aside,nav,article,figure,figcaption,hgroup{
  		display: block;
  		text-align: center;
  	}
	table{
		border: 1px solid;
		width: 960px;
	}
	td{
		width: 200px;
	}
	header{
		height: 80px;
		margin: 5px;
		padding: 10px;
		background: #cccccc;
		text-align: center;
	}

</style>

</head>
<body>
	<header>
		<h1>jQuery Ajax Exercise</h1>
		<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
	</header>
	<section>
		<form action="">
			<table>
				<tr><td>
					<select id="type">
						<option value="koreanfood">한식</option>
						<option value="saladbar">셀러드바</option>
					</select>
					</td>
					<td>
					<select id="detail">
						<option value="sodam">소담애</option>
						<option value="babnbool">밥앤불고기</option>
					</select>
					</td>
				</tr>
				<tr><td></td><td></td></tr>
			</table>
		</form>
	</section>
	<script>
		//type select의 change 이벤트 핸들러를 등록한다.
		$(function(){
			$('#type').on('change', ()=>{
				$.ajax({
					url: 'JQServlet',
					data: {type: $('#type').val()},
					success: handleSuccess
						
						function(result) {
						alert('ajax data=' + JSON.stringify(result));
						//detail select 내부를 변경한다. 삭제 후 생성
						$('#detail').empty();
						for(const key in result){//{}"ashley":"에슐리","lblue":"엘블루"}
							//alert(key);
							let myOption = `<option value="${key}">${result[key]}</option>`;
							$('#detail').append(myOption);
						}
						
					}
				});
			});
		});
		
		$(function(){
			$('#type').on('change', ()=>{
				$.ajax({
					url: 'JPServlet',
					'data': {type: $('#type').val()},
					success(result) {
						$('#detail').empty();
						for(const key in result){
							let myOption = `<option value="${key}">${result[key]}</option>`;
							$('#detail').append(myOption);
						}
					}
				});
			});
		});
	
	
	</script>
</body>
</html>